RewriteEngine on

#Requests to views or media are redirected to the site sub-directory
#These directories have to be included manually
RewriteRule ^(views|media)/(.*)$ sites/%{HTTP_HOST}/$1/$2

#Remove the www portion so that www.example.com == example.com
RewriteRule ^(.+)/sites/www\.(.*)$ $1/sites/$1

#If the request is not an accessible file or directory then
# assume content from the CMS
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9_?&+%]+)$ index.php?page=$1 [QSA]

#Standard error pages
ErrorDocument 404 /index.php?page=error404
ErrorDocument 403 /index.php?page=error403
ErrorDocument 402 /index.php?page=error402
ErrorDocument 402 /index.php?page=error401
ErrorDocument 500 /index.php?page=error500